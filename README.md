# Документация проекта.

## Установка и запуск.

1.  **Клонируйте репозиторий:**

    ```
    git clone https://github.com/yourbosss/WebBackend3.git
     ```

3.  **Установите зависимости:**

    ```
    yarn install
    ```

4.  **Настройте файл .env в корне проекта и установите переменные окружения.**


5.  **Запустите сервер:**

    ```
    yarn run dev
    ```

# Авторизация.
## Получение токена администратора.
Для выполнения запросов с правами администратора необходимо получить JWT-токен.

**Запрос:**
 ```
POST http://localhost:3000/api/auth/login
 ```

**Тело запроса:**
  ```
{
"username": "admin",
"password": "password123"
}
  ```

---

# Управление уроками.

## Создание урока.
**Запрос:**
 ```
POST http://localhost:3000/api/courses/:courseId/lessons
 ```


**Тело запроса (пример):**
 ```
{
  "title": "Lesson 1: Getting Started",
  "content": "This lesson introduces the basics",
  "videoUrl": "https://example.com/video.mp4",
  "order": 1
}
 ```

---

## Получение уроков курса.
**Запрос:**
 ```
GET http://localhost:3000/api/courses/:courseId/lessons
 ```
---

## Получение конкретного курса.
**Запрос:**
 ```
GET http://localhost:3000/api/lessons/:lessonId
 ```
---

## Обновлление урока.
**Запрос:**
 ```
PUT http://localhost:3000/api/lessons/:lessonId
 ```
---

## Удаление урока.
**Запрос:**
 ```
DELETE http://localhost:3000/api/lessons/:lessonId
 ```
---

# Комментарии к урокам.

## Создание комментария.
**Запрос:**
 ```
POST http://localhost:3000/api/lessons/:lessonId/comments
 ```
**Тело запроса (пример):**
 ```
{
  "text": "Great lesson!"
}
 ```
---

## Обновление комментария.
**Запрос:**
 ```
PUT http://localhost:3000/api/comments/<commentId>
 ```
---

## Удаление комментария.
**Запрос:**
 ```
DELETE http://localhost:3000/api/comments/:commentId
 ```
- Примечание: доступно только для автора комментария.
---



### Общие примечания к проекту:
- все запросы (кроме публичного просмотра) требуют JWT-токена;
- для учителей/администраторов проверяется принадлежность курса при создании уроков;
- cистема автоматически обрабатывает конфликты порядковых номеров (order) уроков;
- комментарии к удаленным урокам недоступны для просмотра.


# Реализация функциональности.
## Уроки:
- модель включает: название, контент, ссылку на видео, привязку к курсу и порядковый номер;
- CRUD-операции доступны учителям и админам;
- при создании автоматически назначается порядковый номер;
- удаление урока удаляет все связанные комментарии.

## Комментарии:
- модель содержит: автора, ссылку на урок и текст (до 255 символов);
- студенты могут создавать, редактировать и удалять свои комментарии;
- сортировка по дате (новые сверху);
- автоматически удаляются при удалении урока.

## Хранение файлов:
- изображения хранятся локально;
- видео доступно по ссылке.

## Доступ:
- управление уроками: учителя/админы;
- комментирование: студенты;
- просмотр: все авторизованные пользователи.
